<!DOCTYPE html><html><head><meta charset="UTF-8"/><meta name="og:site_name" content="Gimme The Code: TDD iOS"/><link rel="canonical" href="https://gimmetheco.de/depenency_injection/chapter014"/><meta name="twitter:url" content="https://gimmetheco.de/depenency_injection/chapter014"/><meta name="og:url" content="https://gimmetheco.de/depenency_injection/chapter014"/><title>Dependency Injection | Gimme The Code: TDD iOS</title><meta name="twitter:title" content="Dependency Injection | Gimme The Code: TDD iOS"/><meta name="og:title" content="Dependency Injection | Gimme The Code: TDD iOS"/><meta name="description" content="How to test iOS apps."/><meta name="twitter:description" content="How to test iOS apps."/><meta name="og:description" content="How to test iOS apps."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Gimme The Code: TDD iOS"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">Gimme The Code: TDD iOS</a><nav><ul><li><a href="/introduction">Introduction</a></li><li><a href="/general">General</a></li><li><a class="selected" href="/depenency_injection">Depenency_Injection</a></li><li><a href="/mocks">Mocks</a></li><li><a href="/expectations">Expectations</a></li><li><a href="/easy_tests">Easy_Tests</a></li><li><a href="/uiviewcontroller">Uiviewcontroller</a></li><li><a href="/uiview">Uiview</a></li><li><a href="/uitableview">Uitableview</a></li><li><a href="/uitableviewdatasource">Uitableviewdatasource</a></li><li><a href="/uitableviewdelegate">Uitableviewdelegate</a></li><li><a href="/uicollectionview">Uicollectionview</a></li><li><a href="/uicollectionviewdatasource">Uicollectionviewdatasource</a></li><li><a href="/uicollectionviewdelegate">Uicollectionviewdelegate</a></li><li><a href="/uicollectionviewcomposionallayout">Uicollectionviewcomposionallayout</a></li><li><a href="/networking">Networking</a></li><li><a href="/imprint">Imprint</a></li><li><a href="/privacy">Privacy</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Dependency Injection</h1><p>The different components in your code base depend on each other and on other frameworks (Apple and 3rd party). An example:</p><pre><code><span class="keyword">import</span> Foundation

<span class="keyword">func</span> loadBooks() {
  <span class="keyword">guard let</span> url = <span class="type">URL</span>(string: <span class="string">"http://example.com/books"</span>) <span class="keyword">else</span> {
    <span class="call">fatalError</span>()
  }
  
  <span class="type">URLSession</span>.<span class="property">shared</span>.<span class="call">dataTask</span>(with: url) { data, response, error <span class="keyword">in</span>
    
    <span class="comment">// do stuff</span>
    
    }.<span class="call">resume</span>()
}
</code></pre><p>This code depends on <code>URLSession</code> and its implementation of <code>dataTask(with:completionHandler:)</code>. In a test you often like to exchange such dependencies to make the tests faster and to make testing different scenarios easier. You'd like to 'inject the dependency'. This is sometimes also called 'inversion of control'.</p><h2>Advantages of Dependency Injection</h2><ol><li>In unit tests you need to control the behaviour of the dependencies to be able to test all relevant scenarios (error handling, edge cases, happy path).</li><li>In unit tests you need to replace long running computations (like network calls, data base access, complicated computations) with instant return of fake data.</li><li>You'd like to decouple the different parts of your code from each other and control how they interact from the outside. This also improves readability of your code.</li></ol><h2>How to inject dependencies</h2><p>There are three main ways to inject dependencies.</p><ol><li>Constructor injection</li><li>Setter injection</li><li>Interface injection</li></ol></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/general">general</a></li></ul></article></div><footer><p><a href="https://www.buymeacoffee.com/dasdom">Buy me a coffee</a></p><p><a href="/feed.rss">RSS feed</a><a> | </a><a href="https://twitter.com/dasdom">Twitter</a><a> | </a><a href="https://stackoverflow.com/users/498796/dasdom">StackOverflow</a><a> | </a><a href="https://github.com/dasdom">Github</a><a> | </a><a href="https://pragprog.com/titles/dhios/">My Book</a></p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p></footer></body></html>