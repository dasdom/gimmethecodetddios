<!DOCTYPE html><html><head><meta charset="UTF-8"/><meta name="og:site_name" content="Gimme The Code: TDD iOS"/><link rel="canonical" href="https://gimmetheco.de/mocks/chapter020"/><meta name="twitter:url" content="https://gimmetheco.de/mocks/chapter020"/><meta name="og:url" content="https://gimmetheco.de/mocks/chapter020"/><title>Stubs | Gimme The Code: TDD iOS</title><meta name="twitter:title" content="Stubs | Gimme The Code: TDD iOS"/><meta name="og:title" content="Stubs | Gimme The Code: TDD iOS"/><meta name="description" content="Stubs are used when you need to test whether the system under test reacts to data it gets from another class or module in an expected way. Common examples are UserDefaults and network requests."/><meta name="twitter:description" content="Stubs are used when you need to test whether the system under test reacts to data it gets from another class or module in an expected way. Common examples are UserDefaults and network requests."/><meta name="og:description" content="Stubs are used when you need to test whether the system under test reacts to data it gets from another class or module in an expected way. Common examples are UserDefaults and network requests."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Gimme The Code: TDD iOS"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">Gimme The Code: TDD iOS</a><nav><ul><li><a href="/introduction">Introduction</a></li><li><a href="/general">General</a></li><li><a href="/depenency_injection">Depenency_Injection</a></li><li><a class="selected" href="/mocks">Mocks</a></li><li><a href="/networking">Networking</a></li><li><a href="/expectations">Expectations</a></li><li><a href="/easy_tests">Easy_Tests</a></li><li><a href="/uiviewcontroller">Uiviewcontroller</a></li><li><a href="/uiview">Uiview</a></li><li><a href="/uitableview">Uitableview</a></li><li><a href="/imprint">Imprint</a></li><li><a href="/privacy">Privacy</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>Stubs</h1><p>Stubs are used when you need to test whether the system under test reacts to data it gets from another class or module in an expected way. Common examples are UserDefaults and network requests.</p><h2>Example Stub</h2><pre><code><span class="keyword">class</span> UserDefaultsStub : <span class="type">UserDefaults</span> {
  
  <span class="keyword">private let</span> boolToReturn: <span class="type">Bool</span>
  <span class="keyword">var</span> defaultName: <span class="type">String</span>? = <span class="keyword">nil
  
  init</span>(boolToReturn: <span class="type">Bool</span>) {
    <span class="keyword">self</span>.<span class="property">boolToReturn</span> = boolToReturn
    
    <span class="keyword">super</span>.<span class="keyword">init</span>(suiteName: <span class="keyword">nil</span>)!
  }
  
  <span class="keyword">override func</span> bool(forKey defaultName: <span class="type">String</span>) -&gt; <span class="type">Bool</span> {
    <span class="keyword">self</span>.<span class="property">defaultName</span> = defaultName
    <span class="keyword">return</span> boolToReturn
  }
}
</code></pre><h2>Usage</h2><pre><code>   <span class="keyword">func</span> test_appearance_whenFirstStart_showsOnboarding() {
    <span class="comment">// given</span>
    <span class="keyword">let</span> stubUserDefaults = <span class="type">UserDefaultsStub</span>(boolToReturn: <span class="keyword">false</span>)
    sut.<span class="property">userDefaults</span> = stubUserDefaults
    
    <span class="comment">// when</span>
    sut.<span class="call">beginAppearanceTransition</span>(<span class="keyword">true</span>, animated: <span class="keyword">false</span>)
    sut.<span class="call">endAppearanceTransition</span>()
    
    <span class="comment">// then</span>
    <span class="call">XCTAssertTrue</span>(sut.<span class="property">presentedViewController</span> <span class="keyword">is</span> <span class="type">OnboardingViewController</span>)
    <span class="call">XCTAssertEqual</span>(stubUserDefaults.<span class="property">defaultName</span>, <span class="string">"AlreadyStartedKey"</span>)
  }
</code></pre></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/general">general</a></li></ul></article></div><footer><p><a href="https://www.buymeacoffee.com/dasdom">Buy me a coffee</a></p><p><a href="/feed.rss">RSS feed</a><a> | </a><a href="https://twitter.com/dasdom">Twitter</a><a> | </a><a href="https://stackoverflow.com/users/498796/dasdom">StackOverflow</a><a> | </a><a href="https://github.com/dasdom">Github</a><a> | </a><a href="https://pragprog.com/titles/dhios/">My Book</a></p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p></footer></body></html>